import{r as m,c as _,o as j,a as o,b as r,d as s,e as p,l as h,q as w,t as d,F as x,f as k,n as F,s as D}from"./index-CNtIdQN-.js";import{u as N}from"./decks-DpIHrgWe.js";const B={class:"container mx-auto px-4 py-8 max-w-2xl"},E={class:"mb-6"},M={class:"flex justify-between items-center mb-4"},P={class:"bg-card rounded-lg border p-6 mb-6"},T={class:"space-y-4"},L=["disabled"],R={key:0,class:"mt-6 p-4 bg-muted/50 rounded-md"},A={key:0,class:"space-y-2"},U={class:"text-sm text-green-600"},q={key:0},z={class:"space-y-1"},O={key:0,class:"text-muted-foreground"},W={class:"mt-4"},Y=["disabled"],G={key:1,class:"text-sm text-red-600"},H={class:"list-disc list-inside mt-1"},J={class:"bg-card rounded-lg border p-6"},K={class:"space-y-3"},Q={class:"flex-1"},X={class:"font-medium"},Z={class:"text-sm text-muted-foreground"},ee={class:"text-xs text-muted-foreground mt-1"},te={class:"flex items-center space-x-2"},se={class:"flex items-center text-sm"},oe=["checked","onChange"],re=["onClick","disabled"],de={key:0,class:"text-center py-8 text-muted-foreground"},ie={__name:"DecksView",setup(le){const i=N(),u=m(""),c=m(""),l=m(null),v=m(""),g=m("success"),f=_(()=>i.decks),C=_(()=>({"bg-green-100 text-green-800 border border-green-200":g.value==="success","bg-red-100 text-red-800 border border-red-200":g.value==="error"}));function S(){u.value.trim()&&(l.value=i.importFromCSV(u.value),l.value.success&&(c.value=`Imported Deck ${new Date().toLocaleDateString()}`))}function $(){var n;if(!(!((n=l.value)!=null&&n.success)||!c.value.trim()))try{const e=[];for(const b of l.value.preview.sampleCards){const y=i.addWordCard(b);y.success&&e.push(y.wordCard.id)}const t=i.addDeck({name:c.value,description:`Imported from CSV on ${new Date().toLocaleDateString()}`,category:"imported",source:"user-upload",wordCardIds:e});t.success?(a("Deck created successfully!","success"),u.value="",c.value="",l.value=null):a(`Failed to create deck: ${t.errors.join(", ")}`,"error")}catch(e){a(`Error creating deck: ${e.message}`,"error")}}function V(n,e){const t=i.updateDeckSettings(n,{enabled:e});t.success?a(`Deck ${e?"enabled":"disabled"}`,"success"):a(`Failed to update deck: ${t.errors.join(", ")}`,"error")}function I(n){const e=f.value.find(t=>t.id===n);if(e){if(e.category==="preset"){a("Cannot delete preset decks","error");return}if(confirm(`Are you sure you want to delete "${e.name}"?`)){const t=i.deleteDeck(n);t.success?a("Deck deleted successfully","success"):a(`Failed to delete deck: ${t.message}`,"error")}}}function a(n,e="success"){v.value=n,g.value=e,setTimeout(()=>{v.value=""},3e3)}return j(()=>{i.loadFromPersistence()}),(n,e)=>(r(),o("div",B,[s("header",E,[s("div",M,[e[3]||(e[3]=s("h1",{class:"text-2xl font-bold"},"Deck Management",-1)),s("button",{onClick:e[0]||(e[0]=t=>n.$router.push("/")),class:"text-muted-foreground hover:text-foreground"}," ← Back ")])]),s("div",P,[e[8]||(e[8]=s("h2",{class:"text-lg font-semibold mb-4"},"Import New Deck",-1)),s("div",T,[s("div",null,[e[4]||(e[4]=s("label",{class:"block text-sm font-medium mb-2"},"CSV Content",-1)),h(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),rows:"6",placeholder:`word,translation,part_of_speech,hint
bonjour,hello,interjection,common greeting
merci,thank you,interjection,polite expression`,class:"w-full border rounded-md px-3 py-2 text-sm bg-background"},null,512),[[w,u.value]])]),s("button",{onClick:S,disabled:!u.value.trim(),class:"bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed rounded-md px-4 py-2"}," Preview Import ",8,L)]),l.value?(r(),o("div",R,[e[7]||(e[7]=s("h3",{class:"font-medium mb-2"},"Import Preview",-1)),l.value.success?(r(),o("div",A,[s("p",U," ✓ "+d(l.value.preview.validRows)+" valid rows, "+d(l.value.preview.invalidRows)+" invalid rows ",1),l.value.preview.sampleCards.length>0?(r(),o("div",q,[e[5]||(e[5]=s("p",{class:"text-sm font-medium mb-2"},"Sample cards:",-1)),s("div",z,[(r(!0),o(x,null,k(l.value.preview.sampleCards,t=>(r(),o("div",{key:t.word,class:"text-xs bg-background p-2 rounded border"},[s("strong",null,d(t.word),1),D(" ("+d(t.partOfSpeech)+") → "+d(t.translation)+" ",1),t.hint?(r(),o("span",O," • "+d(t.hint),1)):p("",!0)]))),128))])])):p("",!0),s("div",W,[h(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),placeholder:"Enter deck name",class:"w-full border rounded-md px-3 py-2 text-sm bg-background mb-2"},null,512),[[w,c.value]]),s("button",{onClick:$,disabled:!c.value.trim(),class:"bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 rounded-md px-4 py-2 text-sm"}," Create Deck ",8,Y)])])):(r(),o("div",G,[e[6]||(e[6]=s("p",null,"✗ Import failed:",-1)),s("ul",H,[(r(!0),o(x,null,k(l.value.preview.errors,t=>(r(),o("li",{key:t},d(t),1))),128))])]))])):p("",!0)]),s("div",J,[e[11]||(e[11]=s("h2",{class:"text-lg font-semibold mb-4"},"Your Decks",-1)),s("div",K,[(r(!0),o(x,null,k(f.value,t=>(r(),o("div",{key:t.id,class:"flex items-center justify-between p-4 rounded-md border bg-muted/50"},[s("div",Q,[s("h3",X,d(t.name),1),s("p",Z,d(t.description),1),s("p",ee,d(t.totalCards)+" cards • "+d(t.category)+" • "+d(t.enabled?"Enabled":"Disabled"),1)]),s("div",te,[s("label",se,[s("input",{type:"checkbox",checked:t.enabled,onChange:b=>V(t.id,b.target.checked),class:"mr-1"},null,40,oe),e[9]||(e[9]=D(" Active ",-1))]),s("button",{onClick:b=>I(t.id),class:"text-red-600 hover:text-red-700 text-sm px-2 py-1",disabled:t.category==="preset"}," Delete ",8,re)])]))),128)),f.value.length===0?(r(),o("div",de,[...e[10]||(e[10]=[s("p",null,"No decks created yet",-1)])])):p("",!0)])]),v.value?(r(),o("div",{key:0,class:F(["mt-4 p-4 rounded-md",C.value])},d(v.value),3)):p("",!0)]))}};export{ie as default};
